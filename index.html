<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>Giphy Topic</title>
    <link rel="stylesheet" type="text/css" href="assets/css/reset.css">
    <link rel="stylesheet" href="assets/css/style.css">
</head>
<body>
  <button id="tmp_button">button</button>
  <div id="buttonSection"></div>
  <div id="images">
  </div>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
  <script type="text/javascript">
  var giphy_key = "MMMz06Y0heyrk39RaVPpk2qWqdxaBsNS";
  var topicsArray = [ "dinosaur", "jellyfish", "giraffe",
      "dogs","cats","birds","elephant","fish",
      "tiger","shark"];

  for ( var i=0; i < topicsArray.length; i++)
   {
       var newButton = $("<button>");
       newButton.attr("id","button-"+i);
       newButton.text(topicsArray[i]);
       $(newButton).addClass("gif");
       $("#buttonSection").append(newButton);
   }
    // Event listener for our button
  $("button").on("click", function() {
    // queryURL for Giphy API
    var res = $(this).attr("id").split("-");
    var buttonNumber = res[1];
    var buttonTopic = topicsArray[buttonNumber];
    console.log("topic "+buttonTopic);
console.log("buttonNumber "+buttonNumber);
 var queryURL = "https://api.giphy.com/v1/gifs/search?api_key="+giphy_key+"&q=funny+"+buttonTopic+"&limit=10";
 //   var queryURL = "https://api.giphy.com/v1/gifs/random?api_key="+giphy_key+"&tag=funny+"+buttonTopic;
 console.log("queryURL "+queryURL);

 //   var queryURL = "https://api.giphy.com/v1/gifs/trending?api_key="+giphy_key+"&tag=dog";
  //    var queryURL = "https://api.giphy.com/v1/gifs/random?api_key=dc6zaTOxFJmzC&tag=cats";

console.log("query "+queryURL);

      // Perfoming an AJAX GET request to our queryURL
      $.ajax({
        url: queryURL,
        method: "GET"
      })

      // After the data from the AJAX request comes back
      .then(function(response) {
console.log(response);

      for ( j=0; j < 10; j++ )
      {
      // search key
      var imageUrl = response.data[j].images.original_still.url;
        // Saving the image_original_url property
        // random key
        //var imageUrl = response.data.image_original_url;
      // trending key
      //  var imageUrl = response.data[1].images.original.url;

console.log("imageUrl "+imageUrl);

        // Creating and storing an image tag
        var tmpImage = $("<img>");

        // Setting the tmpImage src attribute to imageUrl
        tmpImage.attr("src", imageUrl);
        tmpImage.attr("alt", "tmp image");

        // Prepending the tmpImage to the images div
        $("#images").prepend(tmpImage);
        } // end for 
      });
    });

  </script>

</body>

</html>